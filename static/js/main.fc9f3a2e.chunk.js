(this["webpackJsonppurchase-analysis"]=this["webpackJsonppurchase-analysis"]||[]).push([[0],{28:function(e,t,n){},30:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);for(var r=n(0),a=n(3),c=n.n(a),i=n(12),o=n.n(i),s=(n(28),n(1)),u=n.n(s),l=n(4),h=n(6),p=n(7),d=n(5),f=n(9),b=n(8),j=(n(30),n(10)),y=n.n(j),g=n(14),v=(n(49),function(e){Object(f.a)(n,e);var t=Object(b.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this;if(!this.props.data[0])return null;var t,n=[],a=240,c=this.props.data.sort((function(e,t){return e.height-t.height}));t=this.props.data[1]?this.props.data.reduce((function(e,t){return e.height>t.height?e.height:t.height})):this.props.data[0].height;var i=this.props.data.map((function(e){return a*e.height/t})).map((function(t){return{height:t+"px",marginTop:a-t,width:e.props.width}})),o=0;i.forEach((function(t,a){var i=t.height.slice(0,-2)-35+"px";o+=parseFloat(e.props.width.slice(0,-2))+4*a,n.push(Object(r.jsxs)("div",{className:"bar",style:t,children:[Object(r.jsx)("div",{className:"horizontalLines",style:{width:o+"px"}}),Object(r.jsx)("p",{className:"label",style:{marginTop:i},children:c[a].label})]},a))}));for(var s=[],u={fontSize:a/18},l=(a-6.1*u.fontSize)/5+"px",h=0;h<=5;h++)l=5===h?0:l,s.unshift(Object(r.jsx)("div",{style:Object(g.a)(Object(g.a)({},u),{},{paddingTop:l}),children:h?(t*h/5).toFixed(1):h},h));var p=this.props.data.length*this.props.width.slice(0,-2)+3*this.props.data.length+50;return Object(r.jsxs)("section",{children:[Object(r.jsx)("p",{className:"title",children:this.props.title}),Object(r.jsx)("div",{className:"frecuences",style:{height:"240px"},children:s}),Object(r.jsx)("div",{className:"chart",style:{width:p+"px"},children:n})]})}}]),n}(a.Component)),x=[],m=0;m<10;m++)x.push({height:"10",label:""});v.defaultProps={data:x,width:"30px",title:""};var O=v,N=n(11),C=(n(50),"https://jsonbox.io/box_fbb6d470aad519ba5e71"),w=!1,k=function(e){Object(f.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,e)).postNewPurchase=r.postNewPurchase.bind(Object(d.a)(r)),r.postNewPurchaseOnEnter=r.postNewPurchaseOnEnter.bind(Object(d.a)(r)),r}return Object(p.a)(n,[{key:"componentDidMount",value:function(){F()}},{key:"render",value:function(){return Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{className:"categories inlineTable",children:[Object(r.jsx)("button",{onClick:q,children:"Food"}),Object(r.jsx)("button",{onClick:q,children:"Rent"}),Object(r.jsx)("button",{onClick:q,children:"Clothes"}),Object(r.jsx)("button",{onClick:q,children:"Tech"})]}),Object(r.jsxs)("div",{className:"left inlineTable",children:[Object(r.jsx)("div",{children:Object(r.jsx)("input",{onKeyUp:S,onClick:E,className:"otherCategory",type:"text",placeholder:"Other Type"})}),Object(r.jsx)("div",{className:"categoryNotification notification"}),Object(r.jsx)("input",{className:"cost",onKeyUp:this.postNewPurchaseOnEnter,placeholder:"$cost",type:"number"}),Object(r.jsx)("div",{className:"priceNotification notification"}),Object(r.jsx)("button",{onClick:this.postNewPurchase,children:"Load Purchase"}),Object(r.jsx)("div",{className:"purchaseDataNotification notification"})]})]})}},{key:"postNewPurchaseOnEnter",value:function(e){13===e.keyCode&&this.postNewPurchase()}},{key:"postNewPurchase",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,n,r,a,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=L(),n=t.cathegory,r=t.price,!t.dataIsValid){e.next=8;break}return M("Loading",".categoryNotification"),e.next=5,y.a.post(C+"/purchases",{category:n,price:r});case 5:a=e.sent,200===(c=a.status)?(M("",".categoryNotification"),M("",".priceNotification"),M("",".purchaseDataNotification"),(i=document.querySelector(".selectedCategory"))?i.classList.remove("selectedCategory"):document.querySelector(".otherCategory").value="",document.querySelector(".cost").value="",this.props.update()):M("Sorry purchase not registed\n error:"+c,"purchaseDataNotification");case 8:w=!1;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(a.Component),E=function(){document.querySelector(".selectedCategory")&&(document.querySelector(".selectedCategory").classList.remove("selectedCategory"),document.querySelector(".otherCategory").style.color="black",w=!1)},S=function(e){13===e.keyCode&&T(e.target.value)},q=function(e){var t=document.querySelector(".selectedCategory");t&&t.classList.remove("selectedCategory"),e.target.classList.add("selectedCategory"),document.querySelector(".otherCategory").style.color="gray",w=e.target.innerText},T=function(e){var t=document.querySelector(".categories"),n=Object(N.a)(t.children).filter((function(e){return e.innerText.length>0})).map((function(e){return e.innerText}));if(e.length>0&&!n.includes(e)){var r=document.createElement("button");r.innerText=e,(t.childElementCount+1)%5===0&&t.appendChild(document.createElement("br")),r.addEventListener("click",q),t.appendChild(r),M("",".categoryNotification"),P(e)}else e.length?M("Existing Category",".categoryNotification"):M("Empty Category",".categoryNotification")},P=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C+"/categories",e.next=3,y.a.post("https://jsonbox.io/box_fbb6d470aad519ba5e71/categories",{name:t});case 3:n=e.sent,200!==(r=n.status)&&alert("Error saving the category: "+r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){if(w)M("",".categoryNotification");else{if(!(w=document.querySelector(".otherCategory").value))return M("Select a category or enter a new one",".categoryNotification"),{cathegory:"",price:0,dataIsValid:!1};T(w),M("",".categoryNotification")}var e=document.querySelector(".cost").value;return!e||e<0?(M("Enter the price of your purchase",".priceNotification"),{cathegory:"",price:0,dataIsValid:!1}):{cathegory:w,price:e,dataIsValid:!0}},M=function(e,t){document.querySelector(t).innerText=e},F=function(){var e=Object(l.a)(u.a.mark((function e(){var t,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get(C+"/categories");case 2:t=e.sent,n=t.data,200===t.status&&(r=document.querySelector(".categories"),Object(N.a)(n).forEach((function(e,t){t%4===0&&r.appendChild(document.createElement("br"));var n=document.createElement("button");n.innerText=e.name,n.addEventListener("click",q),r.appendChild(n)})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e[0])return null;e=e.filter((function(e){return!isNaN(e)})),t||(t=e.lenght<100?Math.ceil(5+e.lenght/20):10);for(var n=Math.max.apply(Math,Object(N.a)(e)),r=Math.min.apply(Math,Object(N.a)(e)),a=[],c=[],i=1;i<=t;i++)a.push(r+n*i/t),c.push(0);e.forEach((function(e){for(var i in a)if(e<a[i]){var o=Math.round((a[i]-r)*t/n)-1;c[o]+=1;break}}));var o=a.map((function(e,t,n){return Math.round(n[t-1]?n[t-1]:0)+" - "+Math.round(e)}));return{labels:o,frecuences:c}},I=function(e,t){var n={};return function(e){return e.filter((function(e,t,n){return n.indexOf(e)===t}))}(e.map((function(e){return e[t]}))).forEach((function(r){n[r]=e.filter((function(e){return e[t]===r}))})),n},V=function(e,t){if(!e[0])return null;var n={"":e};return t.forEach((function(e){var t={};for(var r in n){var a=I(n[r],e);for(var c in a)t[r+" "+c]=a[c]}n=Object.assign({},t)})),n},z=function(e){Object(f.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,e)).update=r.update.bind(Object(d.a)(r)),r}return Object(p.a)(n,[{key:"render",value:function(){var e=this;return B(),J(),Object(r.jsxs)("div",{className:"App center",children:[Object(r.jsx)("p",{className:"title",children:Object(r.jsx)("em",{children:"Log your purchase type and price"})}),Object(r.jsx)("br",{}),Object(r.jsx)(k,{update:function(){e.update()}}),Object(r.jsx)("div",{className:"aux inline"}),Object(r.jsx)("div",{className:"aux2  inline"})]})}},{key:"update",value:function(){this.forceUpdate()}}]),n}(a.Component),U=function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get(C+"/purchases");case 2:if(t=e.sent,n=t.data,200!==t.status){e.next=7;break}return e.abrupt("return",n);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(l.a)(u.a.mark((function e(){var t,n,a,c,i,s,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U();case 2:if(t=e.sent,(n=t.map((function(e){return e.price})))[0]){e.next=6;break}return e.abrupt("return",null);case 6:for(a=D(n),c=a.frecuences,i=a.labels,s=[],l=0;l<c.length;l++)s.push({label:i[l],height:c[l]});console.log(s),o.a.render(Object(r.jsx)(O,{data:s,title:"Prices Distribution"}),document.querySelector(".aux"));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Object(l.a)(u.a.mark((function e(){var t,n,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U();case 2:for(c in t=e.sent,n=V(t,["category"]),a=[],n)a.push({label:c,height:n[c].length});console.log(a),o.a.render(Object(r.jsx)(O,{data:a,title:"Count by Cathegories"}),document.querySelector(".aux2"));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=z,_=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,52)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};o.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(K,{})}),document.getElementById("root")),_()}},[[51,1,2]]]);
//# sourceMappingURL=main.fc9f3a2e.chunk.js.map